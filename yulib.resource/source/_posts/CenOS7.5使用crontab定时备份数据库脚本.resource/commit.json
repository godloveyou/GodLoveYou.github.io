{"compress":true,"commitItems":[["769c9feb-5c00-4968-9de3-64b685e3711d",1565148365654,"---\nlayout: post\ntitle: Lorem ipsum\ncategories: \n  - consectetur\n  - malesuada\ntags:\n  - semper\n  - fermentum\n---\n\n![Nulla euismod, vitae aliquet orci eleifend.]($appres/images/night.jpg)\n\n# Lorem ipsum\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eu tempor dolor. Nulla hendrerit convallis purus et elementum. Suspendisse non magna vel justo tincidunt finibus. Nullam dui erat, malesuada eget viverra non, finibus a nisl.",[[1565148312640,["david@DESKTOP-9844NL4",[[-1,115,"![Nulla euismod, vitae aliquet orci eleifend.]($appres/images/night.jpg)"],[-1,188,"\n# Lorem ipsum\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eu tempor dolor. Nulla hendrerit convallis purus et elementum. Suspendisse non magna vel justo tincidunt finibus. Nullam dui erat, malesuada eget viverra non, finibus a nisl."]],[115,445],[115,115]]],[1565148313874,["david@DESKTOP-9844NL4",[[1,115,"## Mysql定时数据备份\n\n### 编写备份脚本mysqlBackup.sh \n```\n#!/bin/sh\n\nDB_IP=localhost\nDB_PORT=3306\nDB_USER=root\n#密码 #＆这些需要转义加＼\nDB_PASSWORD=l\\#cxhd3\\&0vx\nDB_NAME=business\nDB_BACKUP_DIR=/home/backup/mysql\n\n#切换目录\ncd $DB_BACKUP_DIR\nday=`date +%Y%m%d`\n\n#删除\nrm -rf $day\nmkdir $day\ncd $day\n\necho \"================  开始备份..  =================\"\ntables=(tb_user tb_dept)\nfor table in ${tables[@]};\ndo\n backup_file_name=\"${table}.sql\"\n mysqldump -h${DB_IP} -u${DB_USER} -p${DB_PASSWORD} -P${DB_PORT} $DB_NAME $table>$backup_file_name\ndone\n\necho \"================  结束备份..  =================\"\n```\n\n### 配置邮件配置(不配置的话,邮件不能发送成功)\n```\nvi  /etc/postfix/main.cf\n发现配置为：\ninet_interfaces = localhost\ninet_protocols = all\n\n改成：\ninet_interfaces = all\n\ninet_protocols = all\n\n\n重新启动\nservice postfix start\n```\n### 配置Crontab任务\n```\n$ crontab -e\n\nSHELL=/bin/bash\nPATH=/sbin:/bin:/usr/sbin:/usr/bin\nMAILTO=root\nHOME=/\n\n*/2 * * * * sh /home/backup/mysqlBackup.sh\n```\n\n### 查看日志\n`vim /var/log/cron`\n\n### 查看任务执行详情可以通过查看LINUX系统邮件,任务执行后Crontab会发送邮件给添加该任务的用户\n\nmail 常用命令\n```\nmail 打开邮件列表\nmail p 查看邮件详情\nmail z 返回邮件列表\nmail d 删除邮件\nmail q 保存退出\n```\n\n\n"]],[115,115],[1203,1203]]],[1565148318008,["david@DESKTOP-9844NL4",[[-1,118,"Mysql定时数据备份"]],[118,129],[118,118]]],[1565148324184,["david@DESKTOP-9844NL4",[[-1,0,"---\nlayout: post\ntitle: Lorem ipsum\ncategories: \n  - consectetur\n  - malesuada\ntags:\n  - semper\n  - fermentum\n---"]],[0,113],[0,0]]],[1565148327136,["david@DESKTOP-9844NL4",[[-1,2,"## \n"]],[2,6],[2,2]]],[1565148327705,["david@DESKTOP-9844NL4",[[-1,2,"\n"]],[2,2],[1,1]]],[1565148334672,["david@DESKTOP-9844NL4",[[1,1,"---\ntitle: CentOs定时任务Crontab的使用\ncategories: LINUX\ntags:\n- crontab\n---"]],[1,1],[70,70]]],[1565148343617,["david@DESKTOP-9844NL4",[[1,71,"\n"]],[70,70],[71,71]]],[1565148358192,["david@DESKTOP-9844NL4",[[-1,58," "]],[59,59],[58,58]]],[1565148359017,["david@DESKTOP-9844NL4",[[1,58," "]],[58,58],[59,59]]],[1565148361783,["david@DESKTOP-9844NL4",[[-1,67,"---"]],[70,70],[67,67]]],[1565148362298,["david@DESKTOP-9844NL4",[[1,67,"11"]],[67,67],[69,69]]],[1565148362991,["david@DESKTOP-9844NL4",[[-1,67,"11"]],[69,69],[67,67]]],[1565148364472,["david@DESKTOP-9844NL4",[[1,67,"```"]],[67,67],[70,70]]],[1565148365368,["david@DESKTOP-9844NL4",[[-1,67,"```"]],[70,70],[67,67]]],[1565148368338,["david@DESKTOP-9844NL4",[[1,67,"---"]],[67,67],[70,70]]],[1565148385008,["david@DESKTOP-9844NL4",[[-1,18,"定时任务Crontab的使用"]],[18,32],[18,18]]],[1565148385433,["david@DESKTOP-9844NL4",[[1,18,"d"]],[18,18],[19,19]]],[1565148386544,["david@DESKTOP-9844NL4",[[-1,15,"tOsd"]],[19,19],[15,15]]],[1565148389697,["david@DESKTOP-9844NL4",[[1,15,"OS6"]],[15,15],[18,18]]],[1565148390160,["david@DESKTOP-9844NL4",[[-1,17,"6"]],[18,18],[17,17]]],[1565148391984,["david@DESKTOP-9844NL4",[[1,17,"7.5DING"]],[17,17],[24,24]]],[1565148392664,["david@DESKTOP-9844NL4",[[-1,20,"DING"]],[24,24],[20,20]]],[1565148393417,["david@DESKTOP-9844NL4",[[1,20,"ding"]],[20,20],[24,24]]],[1565148394175,["david@DESKTOP-9844NL4",[[-1,20,"ding"]],[24,24],[20,20]]],[1565148404522,["david@DESKTOP-9844NL4",[[1,20,"定时备份数据库中指定的表"]],[20,20],[32,32]]],[1565148409480,["david@DESKTOP-9844NL4",[[-1,27,"中指定的表"]],[27,32],[27,27]]],[1565148413549,["david@DESKTOP-9844NL4",[[1,27,"脚本"]],[27,27],[29,29]]],[1565148417721,["david@DESKTOP-9844NL4",[[-1,57,"ro"],[1,59,"e"],[-1,61,"ab"]],[56,56],[60,60]]],[1565148418217,["david@DESKTOP-9844NL4",[[1,60,"os"]],[60,60],[62,62]]],[1565148421784,["david@DESKTOP-9844NL4",[[-1,56,"centos"]],[62,62],[56,56]]],[1565148423568,["david@DESKTOP-9844NL4",[[1,56,"Mysql"]],[56,56],[61,61]]],[1565148431088,["david@DESKTOP-9844NL4",[[1,20,"s"]],[20,20],[21,21]]],[1565148431568,["david@DESKTOP-9844NL4",[[-1,20,"s"]],[21,21],[20,20]]],[1565148437497,["david@DESKTOP-9844NL4",[[1,20,"使用crontab"]],[20,20],[29,29]]],[1565148454449,["david@DESKTOP-9844NL4",[[1,80,"1."]],[80,80],[82,82]]],[1565148459290,["david@DESKTOP-9844NL4",[[1,637,"2."]],[637,637],[639,639]]],[1565148468518,["david@DESKTOP-9844NL4",[[1,652,"Crontab执行后"]],[652,652],[662,662]]],[1565148471921,["david@DESKTOP-9844NL4",[[-1,664,"不能发送成功"]],[670,670],[664,664]]],[1565148474146,["david@DESKTOP-9844NL4",[[1,664,"无法发送"]],[664,664],[668,668]]],[1565148480137,["david@DESKTOP-9844NL4",[[1,837,"\n"]],[837,837],[838,838]]],[1565148482210,["david@DESKTOP-9844NL4",[[1,842,"3."]],[842,842],[844,844]]],[1565148487634,["david@DESKTOP-9844NL4",[[1,997,"4. "]],[997,997],[1000,1000]]],[1565148489298,["david@DESKTOP-9844NL4",[[-1,1002,"日志"]],[1004,1004],[1002,1002]]],[1565148492443,["david@DESKTOP-9844NL4",[[1,1002,"任务执行日志"]],[1002,1002],[1008,1008]]]],null,"david@DESKTOP-9844NL4"],["041a9390-daf6-4282-b2af-1c106cdc7af9",1566271898640,"\n---\ntitle: CenOS7.5使用crontab定时备份数据库脚本\ncategories: LINUX\ntags:\n- Mysql\n---\n\n### 1.编写备份脚本mysqlBackup.sh \n```\n#!/bin/sh\n\nDB_IP=localhost\nDB_PORT=3306\nDB_USER=root\n#密码 #＆这些需要转义加＼\nDB_PASSWORD=l\\#cxhd3\\&0vx\nDB_NAME=business\nDB_BACKUP_DIR=/home/backup/mysql\n\n#切换目录\ncd $DB_BACKUP_DIR\nday=`date +%Y%m%d`\n\n#删除\nrm -rf $day\nmkdir $day\ncd $day\n\necho \"================  开始备份..  =================\"\ntables=(tb_user tb_dept)\nfor table in ${tables[@]};\ndo\n backup_file_name=\"${table}.sql\"\n mysqldump -h${DB_IP} -u${DB_USER} -p${DB_PASSWORD} -P${DB_PORT} $DB_NAME $table>$backup_file_name\ndone\n\necho \"================  结束备份..  =================\"\n```\n\n### 2.配置邮件配置(不配置的话,Crontab执行后邮件无法发送)\n```\nvi  /etc/postfix/main.cf\n发现配置为：\ninet_interfaces = localhost\ninet_protocols = all\n\n改成：\ninet_interfaces = all\n\ninet_protocols = all\n\n\n重新启动\nservice postfix start\n```\n\n### 3.配置Crontab任务\n```\n$ crontab -e\n\nSHELL=/bin/bash\nPATH=/sbin:/bin:/usr/sbin:/usr/bin\nMAILTO=root\nHOME=/\n\n*/2 * * * * sh /home/backup/mysqlBackup.sh\n```\n\n### 4. 查看任务执行日志\n`vim /var/log/cron`\n\n### 查看任务执行详情可以通过查看LINUX系统邮件,任务执行后Crontab会发送邮件给添加该任务的用户\n\nmail 常用命令\n```\nmail 打开邮件列表\nmail p 查看邮件详情\nmail z 返回邮件列表\nmail d 删除邮件\nmail q 保存退出\n```\n\n\n\n",[[1566271897782,["david@DESKTOP-9844NL4",[[1,632,"<!-- more -->\n"]],[632,632],[646,646]]]],null,"david@DESKTOP-9844NL4"]]}